<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8"/>
    <title>피드 수정 - Mobble</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    <!-- 헤더 로고용 폰트 -->
    <link
            href="https://fonts.googleapis.com/css2?family=Quicksand&display=swap"
            rel="stylesheet"
    />

    <!-- 공통 CSS -->
    <link rel="stylesheet" href="/css/common.css"/>
    <link rel="stylesheet" href="/css/header.css"/>
    <link rel="stylesheet" href="/css/footer.css"/>
    <link rel="stylesheet" href="/css/sidebar.css"/>

    <!-- 페이지 전용 CSS -->
    <link rel="stylesheet" href="/css/board-save.css"/>

    <!-- Summernote (lite) -->
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/summernote@0.8.20/dist/summernote-lite.min.css"
    />
</head>
<body>
{{> layout/header}}

{{> layout/sidebar}}
{{#model}}
    <main class="write-wrap">
        <form id="updateForm" action="/boards/{{id}}/update" method="post">
            <!-- 숨김 ID는 hidden input으로 -->
            <input type="hidden" id="boardId" name="id" value="{{id}}"/>

            <!-- 제목 -->
            <div class="title-wrap">
                <input
                        class="title-input"
                        type="text"
                        name="title"
                        placeholder="제목 입력..."
                        value="{{title}}"
                        required
                />
            </div>

            <!-- 카테고리 -->
            <section class="category-wrap">
                <button type="button" class="btn-chip gray" id="btnAddCategory"
                        aria-expanded="false" aria-controls="categoryPicker">
                    Add Category
                </button>

                <div class="chip-list" id="chipList" aria-live="polite"></div>

                <div class="category-picker" id="categoryPicker" hidden>
                    <button type="button" class="cat-option">java</button>
                    <button type="button" class="cat-option">springboot</button>
                    <button type="button" class="cat-option">docker</button>
                </div>

                <!-- 서버 제출용 hidden -->
                <input type="hidden" name="category" id="categoryHidden" value="{{category}}"/>
            </section>

            <!-- 에디터 -->
            <section class="editor-wrap">
                <!-- ✅ content는 '그대로' 넣어야 하므로 triple mustache -->
                <textarea id="editor" name="content">{{{content}}}</textarea>
            </section>

            <div class="submit-wrap">
                <button type="submit" class="btn-submit-board">수정하기</button>
            </div>
        </form>
    </main>
{{/model}}

{{> layout/footer}}

<!-- 사이드바 스크립트(규칙 2) -->
<script src="/js/sidebar.js" defer></script>
<!-- (규칙 3) 글 작성/수정 페이지는 search-clear.js 포함하지 않음 -->
<!-- 1) jQuery 먼저 -->
<script
        src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"
        defer
></script>
<!-- 2) Summernote -->
<link
        href="https://cdn.jsdelivr.net/npm/summernote@0.8.20/dist/summernote-lite.min.css"
        rel="stylesheet"
/>
<script
        src="https://cdn.jsdelivr.net/npm/summernote@0.8.20/dist/summernote-lite.min.js"
        defer
></script>
<script src="/js/summernote-init.js" defer></script>
<script src="/js/board-update-category.js" defer></script>
<script src="/js/board-update.js" defer></script>
<script src="/js/footer.js" defer></script>
</body>
</html>
