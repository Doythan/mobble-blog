<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8"/>
    <title>피드 상세 - Mobble</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- 공통 CSS -->
    <link rel="stylesheet" href="/css/common.css"/>
    <link rel="stylesheet" href="/css/header.css"/>
    <link rel="stylesheet" href="/css/footer.css"/>
    <link rel="stylesheet" href="/css/sidebar.css"/>
    <!-- 상세 전용 CSS -->
    <link rel="stylesheet" href="/css/board-detail.css"/>
    <link rel="stylesheet" href="/css/board-detail.addon.css"/>
    <link rel="stylesheet" href="/css/board-detail.report.css"/>
    <link
            href="https://fonts.googleapis.com/css2?family=Quicksand&display=swap"
            rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
<!-- 전역 헤더 -->
{{> layout/header}}

{{> layout/sidebar}}

<!-- 본문 -->
<main class="post-wrap" role="main">
    <p class="post-breadcrumb">피드</p>

    <!-- 글 머리 -->
    <div class="post-head">
        <h1 class="post-title">
            {{model.title}}
        </h1>
    </div>

    <!-- ■ 제목 아래 서브 바: 좌(프로필/이름) · 우(작성일 + 북마크) -->
    <div class="post-subbar" data-author="true">
        <div class="sub-left">
            <span class="avatar" aria-hidden="true">S</span>
            <span class="name">{{model.username}}</span>
        </div>
        <div class="sub-right">
            <!-- 초기 상태: 서버 값으로 true/false -->

            <!--  카테고리-->
            <div class="category-badge">{{model.category}}</div>
            <!--  수정일 or 생성일 -->
            <time datetime="{{model.displayDate}}">
                {{model.displayDate}}
            </time>
            <button
                    class="btn-bookmark"
                    type="button"
                    aria-label="북마크"
                    aria-pressed="false"
                    data-bookmarked={{model.isBookmark}}
                    data-board-id="{{model.id}}"
                    data-create-url="/bookmark/{{model.id}}/save"
                    data-delete-url="/bookmark/{{model.id}}/delete"
            >
                <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
                    <path
                            d="M6 3h12a1 1 0 0 1 1 1v17l-7-4-7 4V4a1 1 0 0 1 1-1z"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="1.5"
                    />
                </svg>
            </button>
            <!-- 게시글 ID / 북마크 추가 POST / 북마크 삭제 DELETE -->
        </div>
    </div>

    <!-- ■ 툴바(본문 위): 햄버거 메뉴 + 드롭다운 -->
    <div class="post-toolbar" data-author="true">
        <div class="tool-right">
            <button
                    class="post-menu-trigger"
                    type="button"
                    aria-haspopup="true"
                    aria-expanded="false"
                    aria-controls="postMenu"
            >
                <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        fill="currentColor"
                        viewBox="0 0 24 24"
                        aria-hidden="true"
                >
                    <circle cx="12" cy="5" r="2"/>
                    <circle cx="12" cy="12" r="2"/>
                    <circle cx="12" cy="19" r="2"/>
                </svg>
                <span class="sr-only">메뉴 열기</span>
            </button>

            <div id="postMenu" class="post-menu" role="menu" hidden>
            {{#model.isOwner}}
                <a
                        class="post-menu-item"
                        role="menuitem"
                        href="/boards/1/update-form"
                >게시글 수정</a
                >
                <button
                        class="post-menu-item danger"
                        role="menuitem"
                        type="button"
                        data-action="delete"
                        data-delete-url="/boards/1/delete"
                >
                    게시글 삭제
                </button>
            {{/model.isOwner}}
            {{^model.isOwner}}
                <button type="button" class="post-menu-item" id="openReportModal">
                    신고
                </button>
            {{/model.isOwner}}
            </div>
        </div>
    </div>


    <!-- 본문 -->
    <article class="post-body">
        {{model.content}}
        <div class="post-reaction">
            <div class="counts">
                <span><i class="fa-regular fa-eye"></i>&nbsp;{{model.views}}</span>
                <span><i class="fa-regular fa-bookmark"></i>&nbsp;{{model.bookmarkCount}}</span>
            </div>
        </div>
    </article>

    <div
            id="lv-container"
            data-id="city"
            data-uid="MTAyMC82MDg4NC8zNzM1NA=="
    ></div>
</main>

<div
        id="confirmDelete"
        class="post-modal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="md-title"
        aria-describedby="md-desc"
        hidden
>
    <div class="post-modal__backdrop" data-close="true"></div>
    <div class="post-modal__dialog" role="document">
        <h3 id="md-title" class="post-modal__title">게시글 삭제</h3>
        <p id="md-desc" class="post-modal__desc">
            게시글 삭제 시 데이터는 복구할 수 없습니다.<br/>
            정말 삭제하시겠습니까?
        </p>
        <div class="post-modal__actions">
            <button type="button" class="pm-btn pm-btn--ghost" data-close="true">
                취소
            </button>
            <button
                    type="button"
                    class="pm-btn pm-btn--danger"
                    id="confirmDeleteBtn"
            >
                삭제
            </button>
        </div>
    </div>
</div>

<!-- 신고 모달 -->
<div class="report-modal" id="reportModal" aria-hidden="true">
    <div class="report-modal__backdrop" id="reportBackdrop"></div>
    <div
            class="report-modal__dialog"
            role="dialog"
            aria-modal="true"
            aria-labelledby="reportTitle"
    >
        <form
                id="reportForm"
                action="/boards/{{model.id}}/report"
                method="post"
                novalidate
        >
            <div class="report-modal__body">
                <section class="report-field">
                    <h3 id="reportTitle" class="report-label">신고 사유</h3>
                    <div class="report-select-wrap">
                        <select
                                name="result"
                                id="reportReason"
                                class="report-select"
                                required
                        >
                            <option value="INAPPROPRIATE_AUTHOR_NAME">부적절한 작성자명</option>
                            <option value="INAPPROPRIATE_BOARD_CONTENT">부적절한 글 내용</option>
                            <option value="ADVERTISING_BOARD_CONTENT">광고성 글 내용</option>
                            <option value="COPYRIGHT_VIOLATION">저작권 침해</option>
                            <option value="PERSONAL_INFORMATION">개인정보 노출</option>
                            <option value="ABUSIVE_LANGUAGE">욕설/비방</option>
                            <option value="SPAM">도배/스팸</option>
                            <option value="ETC">기타</option>
                        </select>
                        <span class="report-select-caret" aria-hidden="true">▾</span>
                    </div>
                    <input
                            type="text"
                            name="resultEtc"
                            id="reportReasonEtc"
                            class="report-input"
                            placeholder="사유를 입력하세요."
                            disabled
                    />
                </section>

                <section class="report-field">
                    <h3 class="report-label">신고 내용</h3>
                    <textarea
                            class="report-textarea"
                            name="content"
                            id="reportContent"
                            placeholder="신고 내용을 입력하세요."
                            required
                    ></textarea>
                </section>
            </div>

            <div class="report-modal__footer">
                <!-- 왼쪽 그룹 -->
                <div class="report-footer-left">
                    <button type="button" class="report-btn report-btn--cancel">
                        취소
                    </button>
                </div>

                <!-- 오른쪽 그룹 -->
                <div class="report-footer-right">
                    <button type="submit" class="report-btn report-btn--submit">
                        신고
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- 전역 푸터 -->
{{> layout/footer}}

<script src="/js/sidebar.js" defer></script>
<script src="/js/board-detail-bookmark.js" defer></script>
<script src="/js/board-delete-modal.js" defer></script>
<script src="/js/board-detail-owner-modal.js" defer></script>
<script src="/js/board-report-modal.js" defer></script>
<script src="/js/livere.js" defer></script>
<script src="/js/search-clear.js" defer></script>
<script src="/js/footer.js" defer></script>
</body>
</html>
